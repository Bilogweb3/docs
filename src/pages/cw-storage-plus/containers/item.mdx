---
tags: ["storage-plus", "containers"]
---

import { Callout } from "nextra/components";

# `Item`

An `Item` is a container that stores a single value that may be stored in some
storage under some key.

## Creating an `Item`

Simply creating an `Item` does not commit anything to storage. In order to
actually store a value into a storage, you need to call the `save` method.

At the moment, values are serialized to the underlying storage in the JSON
format. Your value must implement the `Serialize` and `Deserialize` traits from
the [`serde`] crate in order to be stored.

<Callout>
  This is an implementation detail that may change in the future. You should
  always use the provided API methods to interact with the storage.
</Callout>

## Loading an `Item`

`cw-storage-plus` provides you with two functions for loading an `Item`:

- `load` - which will return an error if the `Item` is empty or if
  deserialization fails.
- `may_load` - which will return `Ok(None)` if the `Item` is empty, and an error
  if deserialization fails.

## Usage examples

### Saving an admin address

```rust template="storage"
use cw_storage_plus::Item;

let admin: Item<String> = Item::new("a");
assert_eq!(admin.may_load(&storage).unwrap(), None);

admin.save(&mut storage, &"some_address".to_string()).unwrap();
assert_eq!(admin.load(&storage).unwrap(), "some_address");
```

### Maintaining a config structure

```rust template="storage"
use cw_storage_plus::Item;
use serde::{Serialize, Deserialize};

#[cw_serde]
struct Config {
    admin: String,
    interest_rate: Decimal,
}

let cfg = Config {
    admin: "some_address".to_string(),
    interest_rate: Decimal::percent(5),
};
let cfg_storage: Item<Config> = Item::new("c");
cfg_storage.save(&mut storage, &cfg).unwrap();

assert_eq!(cfg_storage.load(&storage).unwrap(), cfg);
```

### Default values

Sometimes you might like to read a value, but if it may have never been set, you
want to provide a default. This is a common pattern for counters or other
numeric values.

```rust template="storage"
use cw_storage_plus::Item;

let counter: Item<u128> = Item::new("t");

let mut total = counter.may_load(&storage).unwrap().unwrap_or(0);

assert_eq!(total, 0);
total += 1;

counter.save(&mut storage, &total).unwrap();
```

[`serde`]: https://serde.rs/
